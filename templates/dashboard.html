{% extends 'base.html' %}
{% block content %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<h2>Dashboard</h2>

    <p>
      Welcome {{name}}<br>
    </p>

    <p>
        Your email: {{email}}
        <br>
        Your password: {{password}}
    </p>
    <p>
        Total spent on food: {{ total_food_price }}<br>
        Travel total: {{ total_travel_price }}<br>
        Total clothing: {{ total_clothing_price }}<br>
        Total entertainment: {{ total_entertainment_price }}<br>
        Total online purchase: {{ total_online_purchase_price }}<br>
        Total groceries: {{ total_groceries_price }}<br>
    </p>

    <p>
        Average online purchase price: {{ avg_online_expenditures }}<br>
        Average entertainment purchase price: {{ avg_entertainment_expenditures }}<br>
        Average clothing price: {{ avg_clothing_expenditures }}<br>
        Average travel: {{ avg_travel_expenditures }}<br>
        Average groceries: {{ avg_groceries_expenditures }}<br>
        Average food: {{ avg_food_expenditures }}<br>

    <p>
        Budget:<br>

    {% for budget in budget %}

    <li>

        {{ budget.budget }}<br>
        {{ budget.category }}<br>

    </li>

    {% endfor %}

    </p>

    <p>
        Total spent: {{ total_spent }}
    </p>

    <p>
        <form action="/budget-form" method="POST">
            <input type="submit" value="Add Budget">
        </form>
    <ul>

      {% for expenditure in expenditures %}
      <form action="/remove-expenditure/{{ expenditure.id }}" method="POST">
      <li>
        {{ expenditure.date_of_expenditure }}: <br>
        {{ expenditure.category }}<br>
        {{ expenditure.price }}<br>
        {{ expenditure.where_bought }}<br>
        {{ expenditure.description }}<br>

            <input type="Submit" value="Remove">
        </form>

      </li>
      {% endfor %}
    </ul>

    <p>
        <form action="/expenditure-form" method="POST">
            <input type="submit" value="Add An Expenditure">
        </form>

    <p>
        <form action="/logout" method="POST">
            <input type="submit" value="Log Out">
        </form>


{% endblock %}